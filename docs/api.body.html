<article>
<h2>Things common to all requests:</h2>

<section>
<h3>Notes about this document</h3>
<ul>
<li>"WIP" = "Work in Progress; first attempt to get something that works at all"
<li>"Draft" = "It seems to work, waiting for the whole team + consultants to say Yay"
<li>"Untested" = "automated tests are incomplete"
<li>Just a number = "Ready to be used -- team + consultants like the design and it is tested"
</ul>
</section>

<section>
<h3><span>(1.0 WIP)</span>Transport</h3>
<ul>
<li>All content-modifying actions (POST, PUT, DELETE) require an _authentication_token
    argument; since this is universal, it isn't mentioned in the docs for each action
    separately. The token can be found by calling /account/signin.json / xml
<li>Cookies are used to keep track of sessions
<li>PUT and DELETE can be emulated with POST, having the form variable "_method" set
    to PUT or DELETE respectively
<li>HTTP status codes are used:
    <ul>
      <li>200 - generic success
      <li>201 - content created
      <li>400 - generic user error (commonly missing required data when submitting a form)
      <li>403 - permission denied
      <li>404 - content not found
      <li>500 - generic server error
      <li>501 - not implemented
      <li>502 - back-end server is down for maintenance
    </ul>
</ul>
</section>

<section>
<h3><span>(1.0 WIP)</span>Data formats</h3>
<p>Formats can be added to the end of the URL; for instance while /messages/42
will show you message #42 in a browser-friendly way (HTML), a standalone app
may prefer /messages/42.json or /messages/42.xml

<p>JSON data format:
<pre>
{
    "status": "ok" / "error" / "invalid",                  (required)
    "message": "string to show in app status bar / popup", (string or None, should be there if status = error)
    "data": {                                              (required; blank dictionary if there is no data)
        "foo": "bar", # function-specific data
        "baz": "qux"
    }
}
</pre>

<p>XML is pretty much the same, just in XML</p>
</section>

<section>
<h3>Common List Return Controls</h3>
<p>Calls to objects/ or objects/id will return an object or a list of objects</p>
<p>The fields returned by these calls can be customised by passing the following paramiters:</p>
<ul>
    <li>
        <p>list_type: default='default'</p>
        <p>Permitted Values</p>
        <ul>
        <li>'empty' = no fields (to be used with include_fields to build a custom object)</li>
        <li>'default' = object fields (usually used for list as no links to other objects are present)</li>
        <li>'full' = object + links (links to sub objects or lists are followed e.g a members content_public field will contain a list of published content sub objects)</li>
        <li>'full+actions' = object + links + actions(the current user can perform on this object)</li>
        </ul>
    </li>
    <li>
        <p>'exclude_fields' - ommit fields from the return object</p>
        <p>e.g "exclude_fields=avatar_url,location_home" will ommit the fields avatar_url and location_home form the returned list.</p>
    </li>
    <li>
        <p>'include_fields' - fields to include in the return object</p>
        <p>e.g "include_field=followers,username,name,webpage,content_public".</p>
        <p>Often used in conjection with list_type=empty to build a custom return object.</p>
    </li>
</ul>

</section>

</article>
